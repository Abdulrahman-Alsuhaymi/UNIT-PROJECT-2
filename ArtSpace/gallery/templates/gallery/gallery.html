{% extends 'main/base.html' %}

{% block title %}Gallery | ArtSpace{% endblock %}

{% block content %}
<div class="gallery-container">
    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title">Gallery</h1>
        <p class="page-subtitle">Explore our collection of unique artworks</p>
    </div>

    <div class="filter-section">
        <div class="tag-filter">
            <strong>Filter by Tags:</strong>
            <a href="{% url 'gallery:gallery_view' %}" class="badge tag-badge {% if not selected_category %}active{% endif %} me-2 text-decoration-none">All</a>
            {% for category in categories %}
                <a href="{% url 'gallery:gallery_view' %}?category={{ category.id }}" class="badge tag-badge {% if selected_category == category.id%}active{% endif %} me-2 text-decoration-none">{{category.name}}</a>
            {% empty %}
                <span class="text-muted">No categories yet.</span>
            {% endfor %}
        </div>
        <a href="{% url 'gallery:search_artworks' %}" class="search-button">Search Artworks</a>
    </div>

    <div class="artworks-grid">
        {% for artwork in artworks %}
        <div class="artwork-card">
            <div class="artwork-image-container">
                <a href="{% url 'gallery:artwork_detail' artwork.id %}">
                    <img src="{{ artwork.image.url }}" class="artwork-image" alt="{{artwork.title}}">
                </a>
                <div class="artwork-overlay">
                    <a href="{% url 'gallery:artwork_detail' artwork.id %}" class="view-details">View Details</a>
                </div>
                <form method="post" action="{% url 'gallery:toggle_like' artwork.id %}" class="like-button">
                    {% csrf_token %}
                    <button type="submit" class="like-btn">
                        {% if user.is_authenticated and user in artwork.likes.all %}
                            <span class="liked">&#9825;</span>
                        {% else %}
                            <span class="not-liked">&#9825;</span>
                        {% endif %}
                        <span class="like-count">{{artwork.likes.count}}</span>
                    </button>
                </form>
            </div>
            <div class="artwork-details">
                <h5 class="artwork-title">
                    <a href="{% url 'gallery:artwork_detail' artwork.id %}">{{artwork.title}}</a>
                </h5>
                <p class="artwork-category">{{artwork.category.name}}</p>
                <p class="artwork-artist">
                    <a href="{% url 'gallery:artist_profile' artwork.artist.username %}">{{artwork.artist.username}}</a>
                </p>
                <p class="artwork-price">${{ artwork.price }}</p>
                {% if user.is_authenticated %}
                    <div class="action-buttons">
                        <form method="post" action="{% url 'gallery:add_to_wishlist' artwork.id %}" class="action-form">
                            {% csrf_token %}
                            <button type="submit" class="wishlist-button">Add to Wishlist</button>
                        </form>
                        <form method="post" action="{% url 'gallery:add_to_cart' artwork.id %}" class="action-form">
                            {% csrf_token %}
                            <button type="submit" class="cart-button">Add to Cart</button>
                        </form>
                    </div>
                {% else %}
                    <div class="login-links">
                        <a href="{% url 'accounts:login' %}" class="login-link">Login to add to Wishlist</a>
                        <a href="{% url 'accounts:login' %}" class="login-link">Login to add to Cart</a>
                    </div>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <div class="no-artworks">
            <div class="empty-state">
                <span class="material-icons">palette</span>
                <h3>No Artworks Available</h3>
                <p>No artworks are currently available in the gallery.</p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %} 